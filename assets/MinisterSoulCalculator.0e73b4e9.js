import{l as C}from"./lodash.65b4c225.js";import{f as _,o as r,c as m,a as n,F as c,r as p,w as d,v,g as M,e as I,t as S,n as w,h as Y}from"./index.3a1b65ac.js";import{_ as F}from"./plugin-vue_export-helper.21dcd24c.js";const G=[{name:"Fu Hao",colour:"#F9DC9E",type:"superHeroine"},{name:"Zhongli Chun",colour:"#A76DA8",type:"superHeroine"},{name:"Mi Yue",colour:"#5CB76C",type:"superHeroine"},{name:"Xiao Chuo",colour:"#4E94C0",type:"superHeroine"},{name:"Sikong Ying",colour:"#D4F3F0",type:"superHeroine"},{name:"Gu Danyang",colour:"#FE8BA2",type:"superHeroine"},{name:"Qi Xiaodie",colour:"#BEABF9",type:"superHeroine"},{name:"Lang Longwu",colour:"#EE9906",type:"starDeity"},{name:"Mu Gushi",colour:"#9387E8",type:"starDeity"},{name:"Shen Zhe",colour:"#98C4FB",type:"starDeity"},{name:"Chang Ming",colour:"#E7807E",type:"starDeity"},{name:"Arslan",colour:"#ACE7E7",type:"starDeity"},{name:"Yan Jin",colour:"#F2937D",type:"starDeity"}],b=[{name:"Superheroine Soul Selection Gift Box",souls:{unit:1,ministers:["Gu Danyang","Sikong Ying","Xiao Chuo","Zhongli Chun","Fu Hao","Mi Yue"]}},{name:"Recruitment Selection Box",souls:{unit:1,ministers:["Gu Danyang","Sikong Ying","Zhongli Chun","Fu Hao","Mi Yue"]}},{name:"Star Deity Soul Selection Gift Box",souls:{unit:1,ministers:["Shen Zhe","Chang Ming","Lang Longwu","Mu Gushi","Arslan","Yan Jin"]}},{name:"Fantasy Man Gift Box",souls:{unit:1,ministers:["Shen Zhe","Chang Ming","Lang Longwu","Mu Gushi","Arslan","Yan Jin"]}},{name:"Superheroine Soul Selection Gift Box II",souls:{unit:1,ministers:["Gu Danyang","Sikong Ying","Qi Xiaodie"]}},{name:"Superheroine Soul Shard Selection Gift Box II",souls:{unit:.1,ministers:["Gu Danyang","Sikong Ying","Qi Xiaodie"]}},{name:"Fu Hao Soul",souls:{unit:1,ministers:["Fu Hao"]}},{name:"Zhongli Chun Soul",souls:{unit:1,ministers:["Zhongli Chun"]}},{name:"Mi Yue Soul",souls:{unit:1,ministers:["Mi Yue"]}},{name:"Xiao Chuo Soul",souls:{unit:1,ministers:["Xiao Chuo"]}},{name:"Gu Danyang Soul",souls:{unit:1,ministers:["Gu Danyang"]}},{name:"Superheroine Soul",souls:{unit:1,ministers:["Qi Xiaodie","Gu Danyang","Sikong Ying","Xiao Chuo","Zhongli Chun","Fu Hao","Mi Yue"]}},{name:"Sikong Ying Soul",souls:{unit:1,ministers:["Sikong Ying"]}},{name:"Qi Xiaodie Soul",souls:{unit:1,ministers:["Qi Xiaodie"]}},{name:"Shen Zhe Soul",souls:{unit:1,ministers:["Shen Zhe"]}},{name:"Chang Ming Soul",souls:{unit:1,ministers:["Chang Ming"]}},{name:"Mu Gushi Soul",souls:{unit:1,ministers:["Mu Gushi"]}},{name:"Arslan Soul",souls:{unit:1,ministers:["Arslan"]}},{name:"Yan Jin Soul",souls:{unit:1,ministers:["Yan Jin"]}},{name:"Lang Longwu Soul",souls:{unit:1,ministers:["Lang Longwu"]}},{name:"Recruitment Optional Gift Box",souls:{unit:1,ministers:["Zhongli Chun","Fu Hao","Mi Yue"]}},{name:"Recruitment Selection Pack I",souls:{unit:1,ministers:["Zhongli Chun","Fu Hao","Mi Yue","Chang Ming"]}},{name:"Recruitment Selection Pack II",souls:{unit:1,ministers:["Sikong Ying","Shen Zhe"]}},{name:"Recruitment Selection Pack III",souls:{unit:1,ministers:["Gu Danyang","Mu Gushi"]}},{name:"Recruitment Selection Pack IV",souls:{unit:1,ministers:["Arslan","Qi Xiaodie"]}},{name:"Recruitment Selection Pack VI",souls:{unit:1,ministers:["Qi Xiaodie","Gu Danyang","Sikong Ying","Xiao Chuo","Zhongli Chun","Fu Hao","Mi Yue"]}},{name:"Recruitment Shard Selection Pack VI",souls:{unit:.1,ministers:["Qi Xiaodie","Gu Danyang","Sikong Ying","Xiao Chuo","Zhongli Chun","Fu Hao","Mi Yue"]}},{name:"Immortal Recruitment Gift Box I",souls:{unit:1,ministers:["Zhongli Chun","Fu Hao","Mi Yue","Chang Ming"]}},{name:"Immortal Recruitment Gift Box II",souls:{unit:1,ministers:["Sikong Ying","Shen Zhe"]}},{name:"Immortal Recruitment Gift Box IV",souls:{unit:1,ministers:["Arslan","Qi Xiaodie"]}},{name:"Immortal Recruitment Shard Gift Box I",souls:{unit:.1,ministers:["Zhongli Chun","Fu Hao","Mi Yue","Chang Ming"]}},{name:"Immortal Recruitment Shard Gift Box II",souls:{unit:.1,ministers:["Sikong Ying","Shen Zhe"]}},{name:"Immortal Recruitment Shard Gift Box IV",souls:{unit:.1,ministers:["Arslan","Qi Xiaodie"]}},{name:"Superheroine Soul Gift Box (1)",souls:{unit:1,ministers:["Zhongli Chun","Fu Hao","Mi Yue"]}},{name:"Superheroine Soul Gift Box (2)",souls:{unit:1,ministers:["Xiao Chuo","Zhongli Chun","Fu Hao","Mi Yue"]}},{name:"Superheroine Soul Shard Gift Box (1)",souls:{unit:.1,ministers:["Zhongli Chun","Fu Hao","Mi Yue"]}},{name:"Superheroine Soul Shard Gift Box (2)",souls:{unit:.1,ministers:["Xiao Chuo","Zhongli Chun","Fu Hao","Mi Yue"]}},{name:"Superheroine Soul Gift Box III",souls:{unit:1,ministers:["Qi Xiaodie","Gu Danyang","Sikong Ying","Xiao Chuo","Zhongli Chun","Fu Hao","Mi Yue"]}},{name:"Superheroine Soul Shard Gift Box III",souls:{unit:.1,ministers:["Qi Xiaodie","Gu Danyang","Sikong Ying","Xiao Chuo","Zhongli Chun","Fu Hao","Mi Yue"]}}];var h={ministers:G,items:b};const f="ministersoulcalculator-state",x={mounted(){let o=h.ministers.map(t=>t.name);h.items.flatMap(t=>t.souls.ministers).filter(t=>o.indexOf(t)===-1).forEach(t=>{console.warn("invalid: "+t)})},data(){var o,u,t,s;return{superHeroines:h.ministers.filter(i=>i.type==="superHeroine"),starDeities:h.ministers.filter(i=>i.type==="starDeity"),possibleSouls:this.loadInitialSoulCount(),soulItemCounts:this.toItemCounter(h.items),soulItemsPerRow:(u=(o=this.loadState())==null?void 0:o.itemsPerRow)!=null?u:3,debouncedUpdate:C.exports.debounce(()=>{this.saveState()},2e3),showFractionalSouls:(s=(t=this.loadState())==null?void 0:t.showFractionalSouls)!=null?s:!1}},watch:{soulItemCounts:{handler(o,u){this.updateSoulCount(o),this.debouncedUpdate()},deep:!0}},computed:{soulItemColumn(){return"col-md-"+12/this.soulItemsPerRow},soulItemsChunks(){return C.exports.chunk(h.items.map(o=>this.toCountableItem(o)),this.soulItemsPerRow)}},methods:{toItemCounter(o){var u=this.loadState();let t={};return o.forEach(s=>{t[s.name]=this.toCountableItem(s),u!==null&&u.soulItemCounts[s.name]&&(t[s.name].count=u.soulItemCounts[s.name].count)}),this.updateSoulCount(t),t},toCountableItem(o){return{name:o.name,souls:o.souls,count:0}},loadInitialSoulCount(){var t;let o=Object.assign({},...h.ministers.map(s=>({[s.name]:0}))),u=(t=this.loadState())==null?void 0:t.soulItemCounts;return u&&Object.entries(u).forEach(([s,i])=>{i.souls.ministers.forEach(l=>{o[l]+=i.souls.unit*i.count})}),o},updateSoulCount(o){let u=Object.assign({},...h.ministers.map(t=>({[t.name]:0})));Object.entries(o).forEach(([t,s])=>{s.souls.ministers.forEach(i=>{u[i]+=s.souls.unit*s.count})}),this.possibleSouls=u},displaySoulCount(o){return this.showFractionalSouls?o.toFixed(1):Math.floor(o)},saveState(){let o={itemsPerRow:this.soulItemsPerRow,soulItemCounts:this.soulItemCounts,showFractionalSouls:this.showFractionalSouls};window.localStorage.setItem(f,JSON.stringify(o))},loadState(){let o=window.localStorage.getItem(f);return o?JSON.parse(o):null},getTooltip(o){if(this.possibleSouls[o.name]===0)return"";let t=Object.values(this.soulItemCounts).map(e=>({name:e.name,count:e.count,souls:e.souls})).filter(e=>e.count>0&&e.souls.ministers.indexOf(o.name)!==-1),s=t.filter(e=>e.name===`${o.name} Soul`);if(s.length&&!Number.isInteger(s[0].count)){let e=Math.floor(s[0].count),a=s[0].count-e;s[0].count=e,t.push({name:`${o.name} Soul Shard`,count:a*10,souls:s[0].souls})}let i=C.exports.sortBy(t,["souls.ministers.length","souls.unit"],["asc","asc"]),l="<ul>",g=i.map(e=>e.count.toLocaleString()).sort((e,a)=>a.length-e.length)[0].length;return i.forEach(e=>{let a=e.count.toFixed(0).toString()+" ";l+="<li>"+a.padStart(g+1,"\xA0")+e.name+"</li>"}),l+="</ul>",l}}},k={class:"jumbotron text-center"},D={class:"card-group"},H={class:"card"},B={class:"card-text"},Z=n("br",null,null,-1),X={class:"card-group"},R={class:"card"},E={class:"card-text"},P={class:"row mt-2"},A=["onUpdate:modelValue"],Q=n("br",null,null,-1),L={class:"row"},V=n("p",null,[n("i",null,"This list is in the same order as items appear in your inventory. Some items are missing - message me if you know them. The values you enter here are saved in your browser, so you will be able to view them again later.")],-1),O=n("p",null,[n("i",null,"Hover/tap on a minister's soul count to see the items that contributed towards it.")],-1),j=n("p",null,[n("i",null,"If this isn't proof that souls have gotten out of hand, I don't know what is.")],-1),J={class:"col-md-3"},T={class:"form-group"},U=n("label",null,"Items per row",-1),N=n("option",null,"1",-1),z=n("option",null,"2",-1),K=n("option",{selected:""},"3",-1),q=n("option",null,"4",-1),W=[N,z,K,q],$={class:"form-check"},ee=n("label",null,"Show fractional souls",-1);function oe(o,u,t,s,i,l){const g=_("tooltip");return r(),m(c,null,[n("div",k,[n("div",D,[(r(!0),m(c,null,p(i.starDeities,e=>d((r(),m("div",H,[n("div",{class:"card-body",style:I({"background-color":e.colour})},[n("div",B,[n("h1",null,S(l.displaySoulCount(i.possibleSouls[e.name])),1),n("h6",null,S(e.name),1)])],4)])),[[g,l.getTooltip(e),"bottom"]])),256))]),Z,n("div",X,[(r(!0),m(c,null,p(i.superHeroines,e=>d((r(),m("div",R,[n("div",{class:"card-body",style:I({"background-color":e.colour})},[n("div",E,[n("h1",null,S(l.displaySoulCount(i.possibleSouls[e.name])),1),n("h6",null,S(e.name),1)])],4)])),[[g,l.getTooltip(e),"bottom"]])),256))])]),(r(!0),m(c,null,p(l.soulItemsChunks,e=>(r(),m("div",null,[n("div",P,[(r(!0),m(c,null,p(e,a=>(r(),m("div",{class:w(l.soulItemColumn)},[n("label",null,S(a.name),1),d(n("input",{type:"number",class:"form-control","onUpdate:modelValue":y=>i.soulItemCounts[a.name].count=y,min:"0"},null,8,A),[[Y,i.soulItemCounts[a.name].count]])],2))),256))])]))),256)),Q,n("div",L,[V,O,j,n("div",J,[n("div",T,[U,d(n("select",{class:"form-control",onInput:u[0]||(u[0]=(...e)=>o.onEventSelected&&o.onEventSelected(...e)),"onUpdate:modelValue":u[1]||(u[1]=e=>i.soulItemsPerRow=e)},W,544),[[v,i.soulItemsPerRow]])]),n("div",$,[ee,d(n("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":u[2]||(u[2]=e=>i.showFractionalSouls=e)},null,512),[[M,i.showFractionalSouls]])])])])],64)}var ie=F(x,[["render",oe]]);export{ie as default};
