import{_ as T,N as b,o as n,c as a,a as t,G as S,j as _,k as g,S as N,r as k,t as l,l as E,F as m,f as p,m as I,p as x,q as C,s as D,g as F,n as $}from"./index.e0c0228b.js";const w={data(){return{modalId:"#"+b}}},R=["data-bs-target"],U=t("i",{class:"bi bi-gear"},null,-1),B=[U];function G(e,s,u,d,o,r){return n(),a("a",{class:"link-dark",role:"button","data-bs-toggle":"modal","data-bs-target":o.modalId},B,8,R)}var H=T(w,[["render",G]]);const M="HH:mm:ss",v="HH:mm",f=new I,V={data(){return{serverTimeNow:"",upcomingEvents:[],eventRotation:[]}},components:{NotificationSettingsNavItem:H},computed:{upcomingEventsDisplay(){var e=this.upcomingEvents;return e.map(s=>this.toDisplayableEvent(s))}},mounted(){this.updateServerTime(),this.startServerTimeTick(),this.upcomingEvents=this.getUpcomingTimers(),this.eventRotation=S()},methods:{startServerTimeTick(){setInterval(()=>{this.updateServerTime()},1e3)},updateServerTime(){let e=_();this.serverTimeNow=e.toFormat(M),e.second<1&&(this.upcomingEvents=this.getUpcomingTimers())},getUpcomingTimers(){let e=_(),u=g(e).concat(g(e.plus({day:1}))).filter(o=>o.time>e).sort((o,r)=>o.time.toUnixInteger()-r.time.toUnixInteger()),d=[];return u.forEach(o=>{d.every(r=>r.description!==o.description)&&d.push(o)}),d},toDisplayableEvent(e){return{serverTime:e.time.toFormat(v),localTime:e.time.setZone(N.defaultZone).toFormat(v),description:e.description,occursIn:this.toFriendlyDuration(e.time.diff(_(),["hours","minutes"]))}},toFriendlyDuration(e){let s="";return e.hours>0&&(e.hours===1?s+="1 hour":s+=e.hours+" hours"),e.minutes>0&&(s.length&&(s+=", "),e.minutes<=1.1?s+="1 minute":s+=Math.round(e.minutes)+" minutes"),s},setNotify(e,s){e?f.register(s):f.unregister(s)},isChecked(e){return f.getRegisteredNotifications().indexOf(e)!==-1}}},c=e=>(x("data-v-0fc80b53"),e=e(),C(),e),j={class:"jumbotron text-center"},z={class:"display-4 utc-clock"},A=c(()=>t("p",{class:"lead"},"Server Time (UTC + 1)",-1)),Z=c(()=>t("h4",null,"Current Timers",-1)),q={class:"table table-striped"},L=c(()=>t("th",{scope:"col"},"Server Time",-1)),O=c(()=>t("th",{scope:"col"},"Your Time",-1)),W=c(()=>t("th",{scope:"col"},"Event",-1)),Y=c(()=>t("th",{scope:"col"},"Occurs in...",-1)),J={scope:"col",class:"text-center"},K=D("Notify me "),P={id:"table-body"},Q={class:"text-center"},X=["onChange","checked"],ee=c(()=>t("h4",null,"Season Rotation",-1)),te={class:"table table-striped-double"},se=c(()=>t("thead",null,[t("tr",null,[t("th",{scope:"col"},"Boost Event"),t("th",{scope:"col"},"Event"),t("th",{scope:"col"},"Minigame")])],-1)),oe={id:"table-body"};function ie(e,s,u,d,o,r){const y=k("NotificationSettingsNavItem");return n(),a(m,null,[t("div",j,[t("h1",z,l(o.serverTimeNow),1),A]),Z,t("table",q,[t("thead",null,[t("tr",null,[L,O,W,Y,t("th",J,[K,E(y)])])]),t("tbody",P,[(n(!0),a(m,null,p(r.upcomingEventsDisplay,i=>(n(),a("tr",{key:i.name,class:F(i.description==="Daily reset"?"daily-reset":"")},[t("td",null,l(i.serverTime),1),t("td",null,l(i.localTime),1),t("td",null,l(i.description),1),t("td",null,l(i.occursIn),1),t("td",Q,[t("input",{class:"form-check-input",type:"checkbox",onChange:h=>r.setNotify(h.target.checked,i.description),checked:r.isChecked(i.description)},null,40,X)])],2))),128))])]),ee,t("table",te,[se,t("tbody",oe,[(n(!0),a(m,null,p(o.eventRotation,i=>(n(),a("tr",{style:$({"font-weight":i.isActive?"bolder":"normal"})},[(n(!0),a(m,null,p(i.events,h=>(n(),a("td",null,l(h),1))),256))],4))),256))])])],64)}var ne=T(V,[["render",ie],["__scopeId","data-v-0fc80b53"]]);export{ne as default};
